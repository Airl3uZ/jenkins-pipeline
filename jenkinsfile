@Library('SharedLibrary') _
pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                githubCheckout(
                    branch: 'origin/citest',
                    repo: 'demo-php-ci.git',
                    user: 'Airl3uZ',
                    path: 'data'
                )
            }
        }
        stage("Get Configuration") {
            steps {
                script {
                    config = readYaml file: "data/ci/ciconfig.yml"
                    println config
                    println config.environment
                    // parseConfig("${config}")
                }
                pipelineTemplate("${config}")
            }
        }
    }
}